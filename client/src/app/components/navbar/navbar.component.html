<nav class="navbar">
  <div class="nav-inner">
    <!-- Logo -->
    <a routerLink="/" class="nav-logo">
      <span class="logo-skill">Skill</span><span class="logo-proof">Proof</span>
    </a>

    <!-- Desktop links -->
    <div class="nav-links">
      <a routerLink="/" routerLinkActive="nav-active" [routerLinkActiveOptions]="{exact: true}">Home</a>

      <!-- Logged in -->
      <ng-container *ngIf="authService.currentUser$ | async as user; else guestLinks">
        <a routerLink="/jobs" routerLinkActive="nav-active">Browse Jobs</a>
        <a routerLink="/dashboard" routerLinkActive="nav-active">My Dashboard</a>
        <a routerLink="/profile" class="nav-user" title="View Profile">
          <span class="avatar">{{ user.name.charAt(0) }}</span>
          <span class="user-name">{{ user.name }}</span>
        </a>
        <button class="btn-ghost nav-logout" (click)="logout()" title="Logout">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
            <polyline points="16 17 21 12 16 7" />
            <line x1="21" y1="12" x2="9" y2="12" />
          </svg>
          Logout
        </button>
      </ng-container>

      <!-- Guest -->
      <ng-template #guestLinks>
        <a routerLink="/login" routerLinkActive="nav-active">Login</a>
        <a routerLink="/register" class="btn-primary">Get Started</a>
      </ng-template>
    </div>

    <!-- Mobile hamburger -->
    <button class="hamburger" (click)="menuOpen = !menuOpen" aria-label="Toggle menu">
      <span></span><span></span><span></span>
    </button>
  </div>

  <!-- Mobile dropdown -->
  <div class="mobile-menu" *ngIf="menuOpen">
    <a routerLink="/" (click)="menuOpen=false">Home</a>
    <ng-container *ngIf="authService.currentUser$ | async as user; else guestMobile">
      <a routerLink="/jobs" (click)="menuOpen=false">Browse Jobs</a>
      <a routerLink="/dashboard" (click)="menuOpen=false">My Dashboard</a>
      <a routerLink="/profile" (click)="menuOpen=false">My Profile</a>
      <button class="btn-ghost" (click)="logout(); menuOpen=false">Logout</button>
    </ng-container>
    <ng-template #guestMobile>
      <a routerLink="/login" (click)="menuOpen=false">Login</a>
      <a routerLink="/register" class="btn-primary" (click)="menuOpen=false">Get Started</a>
    </ng-template>
  </div>
</nav>